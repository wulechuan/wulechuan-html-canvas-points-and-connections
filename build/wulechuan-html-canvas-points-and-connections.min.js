!function(){function e(e){function n(e){"boolean"==typeof(e=e||{}).pointsAreRounded&&(F=e.pointsAreRounded),"boolean"==typeof e.shouldBoundAtBoundary&&(A=e.shouldBoundAtBoundary),e.pointSize&&(g=e.pointSize),e.thickestLineWidth&&(y=e.thickestLineWidth),e.maxDistanceToMakeConnection&&(v=e.maxDistanceToMakeConnection),e.pointsCount&&(P=e.pointsCount),e.pointColorRGB&&(M=e.pointColorRGB),e.lineColorRGB&&(w=e.lineColorRGB),e.lineWidthDrawingThreshold&&(m=e.lineWidthDrawingThreshold),e.speedMin&&(O=e.speedMin),e.speedMax&&(N=e.speedMax),C=v*v,d=F?o:a,e.hasOwnProperty("updateOnePointOnIteration")&&("function"==typeof e.updateOnePointOnIteration?p.updateOnePointOnIteration=e.updateOnePointOnIteration:p.updateOnePointOnIteration=f);var n=p.generateOnePoint;e.hasOwnProperty("generateOnePoint")&&("function"==typeof e.generateOnePoint?p.generateOnePoint=e.generateOnePoint:p.generateOnePoint=s),S&&n!==p.generateOnePoint&&c()}function t(){window.addEventListener("mousemove",function(e){D=e.clientX,T=e.clientY}),window.addEventListener("mouseout",function(){D=null,T=null})}function r(e){h.width=h.clientWidth,h.height=h.clientHeight,"function"==typeof e?e(h):i(0,0,h.width,h.height)}function i(e,n,t,r){x=Math.min(e,t),I=Math.max(e,t),j=Math.min(n,r),R=Math.max(n,r)}function o(e,n){b.fillStyle="rgba("+M+",1)",b.beginPath(),b.arc(e,n,g/2,0,2*Math.PI),b.fill()}function a(e,n){b.fillRect(e-g/2,n-g/2,g,g)}function u(e,n,t,r,i){var o=1-i,a=y*o;if(!(a<m)){var u="rgba("+w+","+Math.min(1,o+.5)+")";b.lineWidth=a,b.strokeStyle=u,b.beginPath(),b.moveTo(e,n),b.lineTo(t,r),b.stroke()}}function c(){B.length=0;for(var e=0;e<P;e++){var n={};p.generateOnePoint(n,P,x,j,I,R),p.updateOnePointOnIteration(n,O,N,P,x,j,I,R),B.push(n)}}function s(e){e.x=k()*(I-x)+x,e.y=k()*(R-j)+j}function f(e){var n,t;if(e.hasOwnProperty("vx")){var r=e.speed,i=e.direction;n=r*(.1*k()+.95),t=i+(8*k()-4)/360*Math.PI}else n=k()*(N-O)+O,t=2*k()*Math.PI;e.speed=n,e.direction=t,e.vx=n*Math.sin(t),e.vy=n*Math.cos(t)}function l(e,n,t,r){var i=e-t,o=n-r,a=i*i+o*o;return Math.min(1,a/C)}var d,p=this,h=e.canvas,b=h.getContext("2d"),m=.2,g=6,y=2,v=160,P=60,O=.8,N=2.4,M="0,0,0",w="0,0,0",F=!0,A=!0,x=0,j=0,I=0,R=0,D=null,T=null,C=1e5,B=[],k=Math.random;p.generateOnePoint=s,p.updateOnePointOnIteration=f,p.drawFrame=function(){var e,n,t;b.clearRect(0,0,h.width,h.height),B.forEach(function(r,i){p.updateOnePointOnIteration(r),r.x+=r.vx,r.y+=r.vy,e=r.x,n=r.y,A&&(e>I&&(r.vx=-1*Math.abs(r.vx)),n>R&&(r.vy=-1*Math.abs(r.vy)),e<x&&(r.vx=Math.abs(r.vx)),n<j&&(r.vy=Math.abs(r.vy)));for(var o=i+1;o<B.length;o++)t=B[o],u(e,n,t.x,t.y,l(e,n,t.x,t.y)),null!==D&&u(e,n,D,T,l(e,n,D,T));d(e,n)}),null!==D&&d(D,T)}.bind(p),p.updateCanvasSize=r.bind(p),p.setActiveArea=i.bind(p),n(e),t(),r(),c(),S=!0;var S=!1}window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var n=Math.abs,t=(Math.random,Math.sqrt),r=Math.sin,i=Math.cos,o=(Math.tan,Math.atan2),a=Math.PI,u=2*a,c=n(1e-9),s=180/a,f=a/180;e.utilities={canvasPoint2D:function(e){function n(e){function n(n){e.hasOwnProperty(n)&&(G[n]=e[n])}e=e||{},n("ageRatio"),n("age"),n("ageLimitation"),n("bornTime"),n("m"),n("x"),n("y"),n("vx"),n("forceY"),n("speed"),n("speedDirection"),n("speedDirectionRadian"),n("forceX"),n("forceY"),n("forceStrength"),n("forceDirection"),n("forceDirectionRadian")}function a(){M=F*r(j),w=F*i(j)}function l(){F=t(A=M*M+w*w),j=o(w,M),p()}function d(){j=x*f}function p(){x=j*s}function h(){I=D*r(B),R=D*i(B)}function b(){D=t(T=I*I+R*R),B=o(R,I),g()}function m(){B=C*f}function g(){C=B*s}function y(e){e>=k?(q=!0,(S=e-k)>=W&&(S=W,z=!0),L=S/W):(S=NaN,L=NaN,q=!1,z=!1)}var v=this,P=0,O=0,N=1,M=0,w=0,F=0,A=0,x=0,j=0,I=0,R=0,D=0,T=0,C=0,B=0,k=NaN,S=NaN,L=NaN,W=NaN,q=!1,z=!1,G=(Object.defineProperty(G,"ageRatio",{enumerable:!0,get:function(){return L},set:function(e){return isNaN(W)||((e=parseFloat(e))>=0&&e<=1&&(L=e),evaluateAgeInformationViaAgeRatio()),L}}),Object.defineProperty(G,"age",{enumerable:!0,get:function(){return S},set:function(e){return(e=parseFloat(e))>=0&&(S=e>W?W:e),evaluateAgeInformationViaAge(),S}}),Object.defineProperty(G,"ageLimitation",{enumerable:!0,get:function(){return W},set:function(e){return(e=parseFloat(e))>=c&&(W=e),evaluateAgeInformationViaAgeLimitation(),W}}),Object.defineProperty(G,"bornTime",{enumerable:!0,get:function(){return k},set:function(e){return(e=parseInt(e))>=0&&(k=e),evaluateAgeInformationViaBornTime(),k}}),Object.defineProperty(G,"mass",{enumerable:!0,get:function(){return N},set:function(e){return(e=parseFloat(e))>=0&&(N=e),Math.abs(N)<c&&console.warn("The mass of Point2D is too low!"),N}}),Object.defineProperty(G,"x",{enumerable:!0,get:function(){return P},set:function(e){return e=parseFloat(e),isNaN(e)||(P=e),P}}),Object.defineProperty(G,"y",{enumerable:!0,get:function(){return O},set:function(e){return e=parseFloat(e),isNaN(e)||(O=e),O}}),Object.defineProperty(G,"position",{enumerable:!0,get:function(){return[P,O]},set:function(e){var n,t;return Array.isArray(e)&&e.length>1&&(n=parseFloat(e[0]),t=parseFloat(e[1]),isNaN(n)||isNaN(t)||(P=n,O=t)),[P,O]}}),Object.defineProperty(G,"v",{enumerable:!0,get:function(){return[M,w]},set:function(e){var n,t;return Array.isArray(e)&&e.length>1&&(n=parseFloat(e[0]),t=parseFloat(e[1]),isNaN(n)||isNaN(t)||(M=n,w=t)),l(),[M,w]}}),Object.defineProperty(G,"vx",{enumerable:!0,get:function(){return M},set:function(e){return e=parseFloat(e),isNaN(e)||(M=e),l(),M}}),Object.defineProperty(G,"vy",{enumerable:!0,get:function(){return w},set:function(e){return e=parseFloat(e),isNaN(e)||(w=e),l(),w}}),Object.defineProperty(G,"speed",{enumerable:!0,get:function(){return F},set:function(e){return(e=parseFloat(e))>=0&&(F=e),a(),F}}),Object.defineProperty(G,"speed2",{enumerable:!0,get:function(){return A}}),Object.defineProperty(G,"speedDirection",{enumerable:!0,get:function(){return x},set:function(e){return e=parseFloat(e),isNaN(e)||(x=e%360),a(),d(),x}}),Object.defineProperty(G,"speedDirectionRadian",{enumerable:!0,get:function(){return j},set:function(e){return e=parseFloat(e),isNaN(e)||(j=e%u),a(),p(),j}}),Object.defineProperty(G,"force",{enumerable:!0,get:function(){return[I,R]},set:function(e){var n,t;return Array.isArray(e)&&e.length>1&&(n=parseFloat(e[0]),t=parseFloat(e[1]),isNaN(n)||isNaN(t)||(I=n,R=t)),b(),[I,R]}}),Object.defineProperty(G,"forceX",{enumerable:!0,get:function(){return I},set:function(e){return e=parseFloat(e),isNaN(e)||(I=e),b(),I}}),Object.defineProperty(G,"forceY",{enumerable:!0,get:function(){return R},set:function(e){return e=parseFloat(e),isNaN(e)||(R=e),b(),R}}),Object.defineProperty(G,"forceStrength",{enumerable:!0,get:function(){return D},set:function(e){return(e=parseFloat(e))>=0&&(D=e),h(),D}}),Object.defineProperty(G,"forceStrength2",{enumerable:!0,get:function(){return T}}),Object.defineProperty(G,"forceDirection",{enumerable:!0,get:function(){return C},set:function(e){return e=parseFloat(e),isNaN(e)||(C=e),h(),m(),C}}),void Object.defineProperty(G,"forceDirectionRadian",{enumerable:!0,get:function(){return B},set:function(e){return e=parseFloat(e),isNaN(e)||(B=e),h(),g(),B}}));v.state=G,v.onMove=void 0,v.move=function(e){q&&(z||N<=c||D<=c||(e=parseFloat(e))<=c||(M+=I/N,w+=R/N,l(),P+=M,O+=w))}.bind(v),v.updateClock=y.bind(v),v.moveTo=function(e,n){Array.isArray(e)&&void 0===n?G.position=e:G.position=[e,n]}.bind(v),v.setPosition=v.moveTo,function(e){n(e);var t=parseInt(e.bornTime),r=(new Date).getTime()/1e3;k=t>0?t:r,y(r)}(e)}},window.wulechuanCanvasPointsAndConnections=e}();