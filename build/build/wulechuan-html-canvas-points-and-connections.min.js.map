{"version":3,"sources":["wulechuan-html-canvas-points-and-connections.js"],"names":["randomBetween","a","b","random","nowInSeconds","Date","getTime","wulechuan2DVector","constructorOptions","config","options","processAttribute","attributeName","hasOwnProperty","thisVector","lengthIsWayTooSmall","length","epsilon","dealWithTinyLength","direction","NaN","directionRadian","directionBetween0And2Pi","directionBetween0And360","evaluateDirectionRadianViaDegree","degreeToRadianFactor","evaluateDirectionBetweenZeroAnd2Pi","evaluateDirectionDegreeViaRadian","radianToDegreeFactor","evaluateComponents","x","sin","y","cos","evaluateLengthAndDirection","sqroot","length2","atan2","Pi_2","_evaluateArgmentsForComponents","newX","newY","Array","isArray","parseFloat","setValue","newComponents","isNaN","getDistance2To","comparingComponents","dx","dy","getNewArrayOfSwappedComponents","getNewArrayMultipliedByScalar","scalar","_addOrSubtract","shouldSubtract","additionComponents","additionX","additionY","_rotateBy","degrees","_rotateByRadians","radians","this","tooSmallAbsoluteValue","Object","defineProperty","enumerable","get","set","newLength","newLength2","newDirection","newDirectionRadian","equalTo","comparingX","comparingY","getDistanceTo","swapComponents","value","add","subtract","multiplyByScalar","rotateBy","rotateByRadians","getNewArrayAddedBy","getNewArraySubtractedBy","getNewVectorOfSwappedComponents","getNewVectorAddedBy","getNewVectorSubtractedBy","getNewVectorMultipliedByScalar","getNewVectorRotatedBy","getNewVectorRotatedByRadians","wulechuanImpartVelocityTo","methodsGrantee","propertiesGrantee","customizedPropertyNames","processPropertyName","propertyName","decidedNames","TypeError","decidedChiefName","velocity","newVelocity","newSpeed","newSpeed2","newSpeedDirection","newSpeedDirectionRadian","wulechuanImpartForceTo","force","newForce","newForceStrength","newForceStrength2","newForceDirection","newForceDirectionRadian","wulechuanImpartLifeTo","nilFunction","evaluateAgeInformationViaBornTimeAndReferenceTime","currentTime","referenceTimeIsWallClockTime","referenceTime","bornTime","hasBeenBorn","setAgeTo","isDead","age","ageRatio","bearOn","desiredBornTimeInSeconds","parseInt","updateReferenceTime","newReferenceTimeInSeconds","newAge","ageLimitation","evaluateAgeRatio","evaluateBornTimeViaAge","detectDeath","newAgeRatio","newAgeLimitation","mustBeTrueToTakeEffects","wulechuan2DParticle","thisParticle","processObjectAttribute","buildGettersAndSettersForPublicProperties","mass","newMass","position","newPosX","newPosY","newPosition","move","durationInSeconds","isAlive","moveTo","apply","arguments","propertyName_velocity","propertyName_force","propertyName_life","initOptions","setPosition","onMove","undefined","doNotBearOnInit","wulechuanCanvasPointsAndConnections","pointsAreRounded","shouldBoundAtBoundary","shouldBounceAtBoundary","pointSize","thickestLineWidth","maxDistanceToMakeConnection","pointsCount","pointColorRGB","lineColorRGB","lineWidthDrawingThreshold","maxDistanceToMakeConnection2","theDrawPointMethod","_drawPointAsRoundedDot","_drawPointAsSqure","updateOneParticleOnIteration","thisController","_updateOneParticleOnIterationDefaultMethod","oldinitOneParticleMethod","initOneParticle","_initOneParticleDefaultMethod","hasBeenInitialized","_generateAllPoints","setupMouseEvents","window","addEventListener","event","mouseCursorLocalX","clientX","canvasCurrentX","mouseCursorLocalY","clientY","canvasCurrentY","updateCanvasPositionAndSize","toUpdateActiveArea","canvas","width","clientWidth","height","clientHeight","newBoundingBox","getBoundingClientRect","left","top","setActiveArea","x1","y1","x2","y2","activeAreaX1","Math","min","activeAreaX2","max","activeAreaY1","activeAreaY2","px","py","canvasContext","fillStyle","beginPath","arc","fill","fillRect","drawLine","p1x","p1y","p2x","p2y","distanceRatio","lineColor","lineWidthRatio","lineWidth","strokeStyle","lineTo","stroke","drawVelocity","particle","speed","velocityDebugVisualScale","vx","vy","velocityDebugColor","drawForce","forceStrength","forceDebugVisualScale","fx","fy","forceDebugColor","allParticles","i","push","iterationDuration","evaluateDistanceRatio","position1","position2","distance2Ratio","getContext","shouldLeaveTracksOfPoints","shouldDrawPoints","shouldDrawLines","shouldDebugVelocity","shouldDebugForce","lastFrameDrawnTime","drawFrame","localTimeInSeconds","clearRect","forEach","particleIndex","comparingParticle","abs","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","sqrt","tan","Pi","PI","presets","impartVelocityPropertiesTo","impartForcePropertiesTo","utilities"],"mappings":"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","file":"../wulechuan-html-canvas-points-and-connections.min.js","sourcesContent":["(function () {\n\tvar requestAnimationFrame =\n\t\twindow.requestAnimationFrame\n\t\t|| window.mozRequestAnimationFrame\n\t\t|| window.webkitRequestAnimationFrame\n\t\t|| window.msRequestAnimationFrame\n\t\t|| function (callback) {\n\t\t\twindow.setTimeout(callback, 1000 / 60);\n\t\t};\n\n\tfunction randomBetween(a, b) {\n\t\treturn random() * (b-a) + a;\n\t}\n\t\n\tfunction ratioBetween(v, a, b) {\n\t\tif (a==b) return 1;\n\t\treturn (b - v) /(b - a);\n\t}\n\n\tfunction nowInSeconds() {\n\t\treturn new Date().getTime() / 1000;\n\t}\n\t\n\tvar abs = Math.abs;\n\tvar random = Math.random;\n\tvar sqroot = Math.sqrt;\n\tvar sin = Math.sin;\n\tvar cos = Math.cos;\n\tvar tan = Math.tan;\n\tvar atan2 = Math.atan2;\n\tvar Pi = Math.PI;\n\tvar Pi_2 = Pi * 2;\n\tvar Pi_1_2 = Pi / 2;\n\tvar tooSmallAbsoluteValue = abs(0.000000001);\n\tvar radianToDegreeFactor = 180 / Pi; // used via multiply operator: var newDegree = givenRadian * radianToDegreeFactor;\n\tvar degreeToRadianFactor = Pi / 180; // used via multiply operator: var newRadian = givenDegree * degreeToRadianFactor;\n\n\n\twulechuan2DVector.presets = {\n\t\timpartVelocityPropertiesTo: wulechuanImpartVelocityTo,\n\t\timpartForcePropertiesTo: wulechuanImpartForceTo\n\t};\n\t\n\n\twulechuanCanvasPointsAndConnections.utilities = {\n\t\twulechuan2DVector: wulechuan2DVector,\n\t\twulechuan2DParticle: wulechuan2DParticle\n\t};\n\n\n\twindow.wulechuanCanvasPointsAndConnections = wulechuanCanvasPointsAndConnections;\n\n\n\tfunction wulechuan2DVector(constructorOptions) {\n\t\tvar thisVector = this;\n\n\t\tvar epsilon = tooSmallAbsoluteValue;\n\n\t\tvar x = 0; // component x.\n\t\tvar y = 0; // component y.\n\t\tvar length = 0;\n\t\tvar length2 = 0; // square of length; aka length * length.\n\t\tvar direction = NaN; // the theta in degrees.\n\t\tvar directionRadian = NaN; // the theta in radians.\n\t\tvar directionBetween0And360 = NaN; // the theta in degrees.\n\t\tvar directionBetween0And2Pi = NaN; // the theta in radians.\n\n\n\n\t\t// Being public means being writable.\n\t\tbuildGettersAndSettersForPublicProperties();\n\n\n\t\tthisVector.setValue = setValue;\n\n\t\tthisVector.equalTo = equalTo;\n\t\tthisVector.getDistanceTo = getDistanceTo;\n\t\tthisVector.getDistance2To = getDistance2To;\n\n\t\tthisVector.swapComponents = swapComponents;\n\t\tthisVector.add = add;\n\t\tthisVector.subtract = subtract;\n\t\tthisVector.multiplyByScalar = multiplyByScalar;\n\t\tthisVector.rotateBy = rotateBy;\n\t\tthisVector.rotateByRadians = rotateByRadians;\n\n\t\tthisVector.getNewArrayOfSwappedComponents = getNewArrayOfSwappedComponents;\n\t\tthisVector.getNewArrayAddedBy = getNewArrayAddedBy;\n\t\tthisVector.getNewArraySubtractedBy = getNewArraySubtractedBy;\n\t\tthisVector.getNewArrayMultipliedByScalar = getNewArrayMultipliedByScalar;\n\n\t\tthisVector.getNewVectorOfSwappedComponents = getNewVectorOfSwappedComponents;\n\t\tthisVector.getNewVectorAddedBy = getNewVectorAddedBy;\n\t\tthisVector.getNewVectorSubtractedBy = getNewVectorSubtractedBy;\n\t\tthisVector.getNewVectorMultipliedByScalar = getNewVectorMultipliedByScalar;\n\t\tthisVector.getNewVectorRotatedBy = getNewVectorRotatedBy;\n\t\tthisVector.getNewVectorRotatedByRadians = getNewVectorRotatedByRadians;\n\n\n\t\tinit(constructorOptions);\n\n\n\t\tfunction init(initOptions) {\n\t\t\tconfig(initOptions);\n\t\t}\n\n\t\tfunction config(options) {\n\t\t\toptions = options || {};\n\n\t\t\t// Obviously,\n\t\t\t// later processed attribute will overwrite ealier processed ones,\n\t\t\t// if their values are coupled.\n\t\t\t// For example the new value of x or y or both\n\t\t\t// will overwrite the new value of direction and directionRadian, if any.\n\t\t\t// While the new value of directionRadian\n\t\t\t// will overwrite that of the direction.\n\t\t\tprocessAttribute('length2');\n\t\t\tprocessAttribute('length');\n\n\t\t\tprocessAttribute('direction');\n\t\t\tprocessAttribute('directionRadian');\n\n\t\t\tprocessAttribute('x');\n\t\t\tprocessAttribute('y');\n\t\t\tprocessAttribute('value');\n\n\t\t\tfunction processAttribute(attributeName) {\n\t\t\t\tif (options.hasOwnProperty(attributeName)) {\n\t\t\t\t\tthisVector[attributeName] = options[attributeName];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\n\t\tfunction buildGettersAndSettersForPublicProperties() {\n\t\t\tObject.defineProperty(thisVector, 'x', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn x;\n\t\t\t\t},\n\t\t\t\tset: function (newX) {\n\t\t\t\t\tnewX = parseFloat(newX);\n\t\t\t\t\tif (!isNaN(newX)) {\n\t\t\t\t\t\tx = newX;\n\t\t\t\t\t\tevaluateLengthAndDirection();\n\t\t\t\t\t}\n\t\t\t\t\treturn x;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(thisVector, 'y', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn y;\n\t\t\t\t},\n\t\t\t\tset: function (newY) {\n\t\t\t\t\tnewY = parseFloat(newY);\n\t\t\t\t\tif (!isNaN(newY)) {\n\t\t\t\t\t\ty = newY;\n\t\t\t\t\t\tevaluateLengthAndDirection();\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\treturn y;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(thisVector, 'value', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn [x, y];\n\t\t\t\t},\n\t\t\t\tset: setValue\n\t\t\t});\n\n\t\t\tObject.defineProperty(thisVector, 'isZeroVector', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn lengthIsWayTooSmall();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(thisVector, 'length', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn length;\n\t\t\t\t},\n\t\t\t\tset: function (newLength) {\n\t\t\t\t\tnewLength = parseFloat(newLength);\n\t\t\t\t\tif (newLength >= 0) {\n\t\t\t\t\t\tlength = newLength;\n\t\t\t\t\t\tlength2 = length * length;\n\t\t\t\t\t\tdealWithTinyLength();\n\t\t\t\t\t\tevaluateComponents();\n\t\t\t\t\t}\n\t\t\t\t\treturn length;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(thisVector, 'length2', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn length2;\n\t\t\t\t},\n\t\t\t\tset: function (newLength2) {\n\t\t\t\t\tnewLength2 = parseFloat(newLength2);\n\t\t\t\t\tif (newLength2 >= 0) {\n\t\t\t\t\t\tlength2 = newLength2;\n\t\t\t\t\t\tlength = sqroot(length2);\n\t\t\t\t\t\tdealWithTinyLength();\n\t\t\t\t\t\tevaluateComponents();\n\t\t\t\t\t}\n\t\t\t\t\treturn length2;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(thisVector, 'direction', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn direction;\n\t\t\t\t},\n\t\t\t\tset: function (newDirection) {\n\t\t\t\t\tif (!lengthIsWayTooSmall()) {\n\t\t\t\t\t\tnewDirection = parseFloat(newDirection);\n\t\t\t\t\t\tif (!isNaN(newDirection)) {\n\t\t\t\t\t\t\tdirection = newDirection;\n\t\t\t\t\t\t\t// direction = newdirection % 360;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevaluateDirectionRadianViaDegree();\n\t\t\t\t\t\tevaluateComponents();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn direction;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(thisVector, 'directionBetween0And360', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn directionBetween0And360;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(thisVector, 'directionRadian', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn directionRadian;\n\t\t\t\t},\n\t\t\t\tset: function (newDirectionRadian) {\n\t\t\t\t\tif (!lengthIsWayTooSmall()) {\n\t\t\t\t\t\tnewDirectionRadian = parseFloat(newDirectionRadian);\n\t\t\t\t\t\tif (!isNaN(newDirectionRadian)) {\n\t\t\t\t\t\t\tdirectionRadian = newDirectionRadian;\n\t\t\t\t\t\t\t// directionRadian = newDirectionRadian % Pi2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevaluateDirectionDegreeViaRadian();\n\t\t\t\t\t\tevaluateComponents();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn directionRadian;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(thisVector, 'directionBetween0And2Pi', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn directionBetween0And2Pi;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\n\t\tfunction lengthIsWayTooSmall() {\n\t\t\treturn length <= epsilon;\n\t\t}\n\n\t\tfunction dealWithTinyLength() {\n\t\t\tif (lengthIsWayTooSmall()) {\n\t\t\t\tdirection = NaN;\n\t\t\t\tdirectionRadian = NaN;\n\t\t\t\tdirectionBetween0And2Pi = NaN;\n\t\t\t\tdirectionBetween0And360 = NaN;\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction evaluateDirectionRadianViaDegree() {\n\t\t\tdirectionRadian = direction * degreeToRadianFactor;\n\t\t\tevaluateDirectionBetweenZeroAnd2Pi();\n\t\t}\n\n\t\tfunction evaluateDirectionDegreeViaRadian() {\n\t\t\tdirection = directionRadian * radianToDegreeFactor;\n\t\t\tevaluateDirectionBetweenZeroAnd2Pi();\n\t\t}\n\n\t\tfunction evaluateComponents() {\n\t\t\tx = length * sin(directionRadian);\n\t\t\ty = length * cos(directionRadian);\n\t\t}\n\n\t\tfunction evaluateLengthAndDirection() {\n\t\t\tlength2 = x * x + y * y;\n\t\t\tlength = sqroot(length2);\n\t\t\tif (!dealWithTinyLength()) {\n\t\t\t\tdirectionRadian = atan2(y, x);\n\t\t\t\tevaluateDirectionDegreeViaRadian();\n\t\t\t}\n\t\t}\n\n\t\tfunction evaluateDirectionBetweenZeroAnd2Pi() {\n\t\t\tdirectionBetween0And2Pi = directionRadian % Pi_2;\n\t\t\tdirectionBetween0And360 = direction % 360;\n\t\t}\n\n\n\t\tfunction _evaluateArgmentsForComponents(a, b) {\n\t\t\tvar newX = NaN;\n\t\t\tvar newY = NaN;\n\n\t\t\tif (a instanceof wulechuan2DVector) {\n\t\t\t\tnewX = a.x;\n\t\t\t\tnewY = a.y;\n\t\t\t} else if (Array.isArray(a)) {\n\t\t\t\tif (a.length > 1) {\n\t\t\t\t\tnewX = parseFloat(a[0]);\n\t\t\t\t\tnewY = parseFloat(a[1]);\n\t\t\t\t}\n\t\t\t} else if (a && typeof a === 'object' && a.hasOwnProperty('x')) {\n\t\t\t\tnewX = parseFloat(a.x);\n\t\t\t\tnewY = parseFloat(a.y);\n\t\t\t} else {\n\t\t\t\tnewX = parseFloat(a);\n\t\t\t\tnewY = parseFloat(b);\n\t\t\t}\n\n\t\t\treturn [newX, newY];\n\t\t}\n\n\t\tfunction setValue(a, b) {\n\t\t\tvar newComponents = _evaluateArgmentsForComponents(a, b);\n\t\t\tvar newX = newComponents[0];\n\t\t\tvar newY = newComponents[1];\n\n\t\t\tif (!isNaN(newX) && !isNaN(newY)) {\n\t\t\t\tx = newX;\n\t\t\t\ty = newY;\n\t\t\t\tevaluateLengthAndDirection();\t\t\t\t\t\t\n\t\t\t}\n\n\t\t\treturn [x, y];\n\t\t}\n\n\t\tfunction equalTo(a, b) {\n\t\t\tvar comparingComponents = _evaluateArgmentsForComponents(a, b);\n\t\t\tvar comparingX = comparingComponents[0];\n\t\t\tvar comparingY = comparingComponents[1];\n\n\t\t\tif (!isNaN(comparingX) && !isNaN(comparingY)) {\n\t\t\t\treturn x == comparingX && y === comparingY;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction getDistance2To(a, b) {\n\t\t\tvar comparingComponents = _evaluateArgmentsForComponents(a, b);\n\t\t\tvar dx = comparingComponents[0] - x;\n\t\t\tvar dy = comparingComponents[1] - y;\n\n\t\t\tif (!isNaN(dx) && !isNaN(dy)) {\n\t\t\t\treturn dx * dx + dy * dy;\n\t\t\t}\n\n\t\t\treturn NaN;\n\t\t}\n\n\t\tfunction getDistanceTo(a, b) {\n\t\t\treturn sqroot(getDistance2To(a, b));\n\t\t}\n\n\n\n\n\t\tfunction getNewArrayOfSwappedComponents() {\n\t\t\tvar newX = y;\n\t\t\tvar newY = x;\n\t\t\treturn [newX, newY];\n\t\t}\n\n\t\tfunction getNewArrayMultipliedByScalar(scalar) {\n\t\t\tvar newX = x;\n\t\t\tvar newY = y;\n\n\t\t\tscalar = parseFloat(scalar);\n\t\t\tif (!isNaN(scalar)) {\n\t\t\t\tnewX *= scalar;\n\t\t\t\tnewY *= scalar;\n\t\t\t}\n\n\t\t\treturn [newX, newY];\n\t\t}\n\n\t\tfunction _addOrSubtract(a, b, shouldSubtract) {\n\t\t\tvar additionComponents = _evaluateArgmentsForComponents(a, b);\n\t\t\tvar newX = x;\n\t\t\tvar newY = y;\n\t\t\tvar additionX = additionComponents[0];\n\t\t\tvar additionY = additionComponents[1];\n\n\t\t\tif (!isNaN(additionX) && !isNaN(additionY)) {\n\t\t\t\tif (shouldSubtract) {\n\t\t\t\t\tnewX -= additionX;\n\t\t\t\t\tnewY -= additionY;\n\t\t\t\t} else {\n\t\t\t\t\tnewX += additionX;\n\t\t\t\t\tnewY += additionY;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn [newX, newY];\n\t\t}\n\n\t\tfunction _rotateBy(degrees) {\n\t\t\treturn direction + degrees;\n\t\t}\n\n\t\tfunction _rotateByRadians(radians) {\n\t\t\treturn directionRadian + radians;\n\t\t}\n\n\n\t\tfunction getNewVectorOfSwappedComponents() {\n\t\t\treturn new wulechuan2DVector({\n\t\t\t\tvalue: getNewArrayOfSwappedComponents()\n\t\t\t});\n\t\t}\n\n\t\tfunction getNewArrayAddedBy(a, b) {\n\t\t\treturn _addOrSubtract(a, b, false);\n\t\t}\n\n\t\tfunction getNewVectorAddedBy(a, b) {\n\t\t\treturn new wulechuan2DVector({\n\t\t\t\tvalue: _addOrSubtract(a, b, false)\n\t\t\t});\t\t\t\n\t\t}\n\n\t\tfunction getNewArraySubtractedBy(a, b) {\n\t\t\treturn _addOrSubtract(a, b, true);\n\t\t}\n\n\t\tfunction getNewVectorSubtractedBy(a, b) {\n\t\t\treturn new wulechuan2DVector({\n\t\t\t\tvalue: _addOrSubtract(a, b, true)\n\t\t\t});\t\t\t\n\t\t}\n\n\t\tfunction getNewVectorMultipliedByScalar(scalar) {\n\t\t\treturn new wulechuan2DVector({\n\t\t\t\tvalue: getNewArrayMultipliedByScalar(scalar)\n\t\t\t});\t\t\t\n\t\t}\n\n\t\tfunction getNewVectorRotatedBy(degrees) {\n\t\t\tvar newDirection = _rotateBy(degrees);\n\t\t\treturn new wulechuan2DVector({\n\t\t\t\tlength: length,\n\t\t\t\tdirection: newDirection\n\t\t\t});\n\t\t}\n\n\t\tfunction getNewVectorRotatedByRadians(radians) {\n\t\t\tvar newDirectionRadian = _rotateByRadians(radians);\n\t\t\treturn new wulechuan2DVector({\n\t\t\t\tlength: length,\n\t\t\t\tdirectionRadian: newDirectionRadian\n\t\t\t});\n\t\t}\n\n\n\n\n\t\tfunction swapComponents() {\n\t\t\tthisVector.value = getNewArrayOfSwappedComponents();\n\t\t\treturn thisVector;\n\t\t}\n\n\t\tfunction multiplyByScalar(scalar) {\n\t\t\tthisVector.value = getNewArrayMultipliedByScalar(scalar);\n\t\t\treturn thisVector;\n\t\t}\n\n\t\tfunction add(a, b) {\n\t\t\tthisVector.value = _addOrSubtract(a, b, false);\n\t\t\treturn thisVector;\n\t\t}\n\n\t\tfunction subtract(a, b) {\n\t\t\tthisVector.value = _addOrSubtract(a, b, true);\n\t\t\treturn thisVector;\n\t\t}\n\n\t\tfunction rotateBy(degrees) {\n\t\t\tthisVector.direction = _rotateBy(degrees);\n\t\t\treturn thisVector;\n\t\t}\n\n\t\tfunction rotateByRadians(radians) {\n\t\t\tthisVector.directionRadian = _rotateBy(radians);\n\t\t\treturn thisVector;\n\t\t}\n\t}\n\n\tfunction wulechuanImpartVelocityTo(methodsGrantee, propertiesGrantee, customizedPropertyNames) {\n\t\tif (typeof methodsGrantee !== 'object' || !methodsGrantee) {\n\t\t\tthrow TypeError(\n\t\t\t\t'The grantee to impart methods and properties to' +\n\t\t\t\t' must be an object, and not a null.'\n\t\t\t);\n\t\t}\n\n\t\tif (typeof propertiesGrantee !== 'object' || !propertiesGrantee) {\n\t\t\tpropertiesGrantee = methodsGrantee;\n\t\t}\n\n\t\tvar pN_chief = 'velocity';\n\t\tvar pN_speed = 'speed';\n\t\tvar pN_speed2 = 'speed2';\n\t\tvar pN_velocityDirection = 'velocityDirection';\n\t\tvar pN_velocityDirectionRadian = 'velocityDirectionRadian';\n\t\tvar pN_turnBy = 'turnBy';\n\t\tvar pN_turnByRadians = 'turnByRadians';\n\t\tvar decidedNames = {};\n\n\t\tcustomizedPropertyNames = customizedPropertyNames || {};\n\t\tif (typeof customizedPropertyNames === 'string') {\n\t\t\tdecidedNames[pN_chief] = customizedPropertyNames;\n\t\t} else if (customizedPropertyNames[pN_chief] && typeof customizedPropertyNames[pN_chief] === 'string') {\n\t\t\tdecidedNames[pN_chief] = customizedPropertyNames[pN_chief];\n\t\t} else {\n\t\t\tdecidedNames[pN_chief] = pN_chief;\n\t\t}\n\t\tvar decidedChiefName = decidedNames[pN_chief];\n\n\t\tdecidedNames[pN_speed] = pN_speed;\n\t\tdecidedNames[pN_speed2] = pN_speed2;\n\t\tdecidedNames[pN_velocityDirection] = decidedChiefName + 'Direction';\n\t\tdecidedNames[pN_velocityDirectionRadian] = decidedChiefName + 'DirectionRadian';\n\t\tdecidedNames[pN_turnBy] = pN_turnBy;\n\t\tdecidedNames[pN_turnByRadians] = pN_turnByRadians;\n\n\t\tprocessPropertyName(pN_speed);\n\t\tprocessPropertyName(pN_speed2);\n\t\tprocessPropertyName(pN_velocityDirection);\n\t\tprocessPropertyName(pN_velocityDirectionRadian);\n\t\tprocessPropertyName(pN_turnBy);\n\t\tprocessPropertyName(pN_turnByRadians);\n\n\t\tfunction processPropertyName(propertyName) {\n\t\t\tif (customizedPropertyNames[propertyName] && typeof customizedPropertyNames[propertyName] === 'string') {\n\t\t\t\tdecidedNames[propertyName] = customizedPropertyNames[propertyName];\n\t\t\t}\n\t\t}\n\n\n\n\n\t\tvar velocity = new wulechuan2DVector();\n\n\n\n\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_chief],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn velocity;\n\t\t\t\t},\n\t\t\t\tset: function (newVelocity) {\n\t\t\t\t\treturn velocity.value = newVelocity;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_speed],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn velocity.length;\n\t\t\t\t},\n\t\t\t\tset: function (newSpeed) {\n\t\t\t\t\tvelocity.length = newSpeed;\n\t\t\t\t\treturn velocity.length;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_speed2],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn velocity.length2;\n\t\t\t\t},\n\t\t\t\tset: function (newSpeed2) {\n\t\t\t\t\tvelocity.length2 = newSpeed2;\n\t\t\t\t\treturn velocity.length2;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_velocityDirection],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn velocity.direction;\n\t\t\t\t},\n\t\t\t\tset: function (newSpeedDirection) {\n\t\t\t\t\tvelocity.direction = newSpeedDirection;\n\t\t\t\t\treturn velocity.direction;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_velocityDirectionRadian],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn velocity.directionRadian;\n\t\t\t\t},\n\t\t\t\tset: function (newSpeedDirectionRadian) {\n\t\t\t\t\tvelocity.directionRadian = newSpeedDirectionRadian;\n\t\t\t\t\treturn velocity.directionRadian;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\n\t\tmethodsGrantee[decidedNames[pN_turnBy]] = turnBy;\n\t\tmethodsGrantee[decidedNames[pN_turnByRadians]] = turnByRadians;\n\n\n\t\tfunction turnBy(degrees) {\n\t\t\tvelocity.direction += degrees;\n\t\t}\n\n\t\tfunction turnByRadians(radians) {\n\t\t\tvelocity.directionRadian += radians;\n\t\t}\n\t}\n\n\tfunction wulechuanImpartForceTo(methodsGrantee, propertiesGrantee, customizedPropertyNames) {\n\t\tif (typeof methodsGrantee !== 'object' || !methodsGrantee) {\n\t\t\tthrow TypeError(\n\t\t\t\t'The grantee to impart methods and properties to' +\n\t\t\t\t' must be an object, and not a null.'\n\t\t\t);\n\t\t}\n\n\t\tif (typeof propertiesGrantee !== 'object' || !propertiesGrantee) {\n\t\t\tpropertiesGrantee = methodsGrantee;\n\t\t}\n\n\t\tvar pN_chief = 'force';\n\t\tvar pN_forceStrength = 'forceStrength';\n\t\tvar pN_forceStrength2 = 'forceStrength2';\n\t\tvar pN_forceDirection = 'forceDirection';\n\t\tvar pN_forceDirectionRadian = 'forceDirectionRadian';\n\t\tvar decidedNames = {};\n\n\t\tcustomizedPropertyNames = customizedPropertyNames || {};\n\t\tif (typeof customizedPropertyNames === 'string') {\n\t\t\tdecidedNames[pN_chief] = customizedPropertyNames;\n\t\t} else if (customizedPropertyNames[pN_chief] && typeof customizedPropertyNames[pN_chief] === 'string') {\n\t\t\tdecidedNames[pN_chief] = customizedPropertyNames[pN_chief];\n\t\t} else {\n\t\t\tdecidedNames[pN_chief] = pN_chief;\n\t\t}\n\t\tvar decidedChiefName = decidedNames[pN_chief];\n\n\t\tdecidedNames[pN_forceStrength] = decidedChiefName + 'Strength';\n\t\tdecidedNames[pN_forceStrength2] = decidedChiefName + 'Strength2';\n\t\tdecidedNames[pN_forceDirection] = decidedChiefName + 'Direction';\n\t\tdecidedNames[pN_forceDirectionRadian] = decidedChiefName + 'DirectionRadian';\n\n\t\tprocessPropertyName(pN_forceStrength);\n\t\tprocessPropertyName(pN_forceStrength2);\n\t\tprocessPropertyName(pN_forceDirection);\n\t\tprocessPropertyName(pN_forceDirectionRadian);\n\n\t\tfunction processPropertyName(propertyName) {\n\t\t\tif (customizedPropertyNames[propertyName] && typeof customizedPropertyNames[propertyName] === 'string') {\n\t\t\t\tdecidedNames[propertyName] = customizedPropertyNames[propertyName];\n\t\t\t}\n\t\t}\n\n\n\n\n\t\tvar force = new wulechuan2DVector();\n\n\n\n\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_chief],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn force;\n\t\t\t\t},\n\t\t\t\tset: function (newForce) {\n\t\t\t\t\treturn force.value = newForce;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_forceStrength],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn force.length;\n\t\t\t\t},\n\t\t\t\tset: function (newForceStrength) {\n\t\t\t\t\tforce.length = newForceStrength;\n\t\t\t\t\treturn force.length;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_forceStrength2],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn force.length2;\n\t\t\t\t},\n\t\t\t\tset: function (newForceStrength2) {\n\t\t\t\t\tforce.length2 = newForceStrength2;\n\t\t\t\t\treturn force.length2;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_forceDirection],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn force.direction;\n\t\t\t\t},\n\t\t\t\tset: function (newForceDirection) {\n\t\t\t\t\tforce.direction = newForceDirection;\n\t\t\t\t\treturn force.direction;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_forceDirectionRadian],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn force.directionRadian;\n\t\t\t\t},\n\t\t\t\tset: function (newForceDirectionRadian) {\n\t\t\t\t\tforce.directionRadian = newForceDirectionRadian;\n\t\t\t\t\treturn force.directionRadian;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tfunction wulechuanImpartLifeTo(methodsGrantee, propertiesGrantee, customizedPropertyNames) {\n\t\tif (typeof methodsGrantee !== 'object' || !methodsGrantee) {\n\t\t\tthrow TypeError(\n\t\t\t\t'The grantee to impart methods and properties to' +\n\t\t\t\t' must be an object, and not a null.'\n\t\t\t);\n\t\t}\n\n\t\tif (typeof propertiesGrantee !== 'object' || !propertiesGrantee) {\n\t\t\tpropertiesGrantee = methodsGrantee;\n\t\t}\n\n\t\tvar pN_chief = 'age';\n\t\tvar pN_ageRatio = 'ageRatio';\n\t\tvar pN_ageLimitation = 'ageLimitation';\n\t\tvar pN_ageReferenceTime = 'ageReferenceTime';\n\t\tvar pN_ageReferenceTimeIsWallClockTime = 'ageReferenceTimeIsWallClockTime';\n\t\tvar pN_bornTime = 'bornTime';\n\t\tvar pN_hasBeenBorn = 'hasBeenBorn';\n\t\tvar pN_isDead = 'isDead';\n\t\tvar pN_isAlive = 'isAlive';\n\t\tvar pN_bearOn = 'bearOn';\n\n\t\tvar decidedNames = {};\n\n\t\tcustomizedPropertyNames = customizedPropertyNames || {};\n\t\tif (typeof customizedPropertyNames === 'string') {\n\t\t\tdecidedNames[pN_chief] = customizedPropertyNames;\n\t\t} else if (customizedPropertyNames[pN_chief] && typeof customizedPropertyNames[pN_chief] === 'string') {\n\t\t\tdecidedNames[pN_chief] = customizedPropertyNames[pN_chief];\n\t\t} else {\n\t\t\tdecidedNames[pN_chief] = pN_chief;\n\t\t}\n\t\tvar decidedChiefName = decidedNames[pN_chief];\n\n\t\tdecidedNames[pN_ageRatio] = decidedChiefName + 'Ratio';\n\t\tdecidedNames[pN_ageLimitation] = decidedChiefName + 'Limitation';\n\t\tdecidedNames[pN_ageReferenceTime] = decidedChiefName + 'ReferenceTime';\n\t\tdecidedNames[pN_ageReferenceTimeIsWallClockTime] = decidedChiefName + 'ReferenceTimeIsWallClockTime';\n\t\tdecidedNames[pN_bornTime] = pN_bornTime;\n\t\tdecidedNames[pN_hasBeenBorn] = pN_hasBeenBorn;\n\t\tdecidedNames[pN_isDead] = pN_isDead;\n\t\tdecidedNames[pN_isAlive] = pN_isAlive;\n\t\tdecidedNames[pN_bearOn] = pN_bearOn;\n\n\t\tprocessPropertyName(pN_ageRatio);\n\t\tprocessPropertyName(pN_ageLimitation);\n\t\tprocessPropertyName(pN_ageReferenceTime);\n\t\tprocessPropertyName(pN_ageReferenceTimeIsWallClockTime);\n\t\tprocessPropertyName(pN_bornTime);\n\t\tprocessPropertyName(pN_hasBeenBorn);\n\t\tprocessPropertyName(pN_isDead);\n\n\t\tfunction processPropertyName(propertyName) {\n\t\t\tif (customizedPropertyNames[propertyName] && typeof customizedPropertyNames[propertyName] === 'string') {\n\t\t\t\tdecidedNames[propertyName] = customizedPropertyNames[propertyName];\n\t\t\t}\n\t\t}\n\n\n\n\n\t\tvar bornTime = NaN;\n\t\tvar referenceTime = NaN; // in seconds instead of milliseconds\n\t\tvar referenceTimeIsWallClockTime = true; // True means particle runs free mode, in which the particle does NOT need an explicit external time reference\n\t\tvar age = NaN;\n\t\tvar ageRatio = NaN;  // scalar that can be either NaN or between [0, 1]\n\t\tvar ageLimitation = NaN; // in seconds\n\t\tvar hasBeenBorn = false;\n\t\tvar isDead = false;\n\n\n\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_chief],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn age;\n\t\t\t\t},\n\t\t\t\tset: setAgeTo\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_ageRatio],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn ageRatio;\n\t\t\t\t},\n\t\t\t\tset: function (newAgeRatio) {\n\t\t\t\t\tif (!isNaN(ageLimitation)) {\n\t\t\t\t\t\tnewAgeRatio = parseFloat(newAgeRatio);\n\t\t\t\t\t\tif (newAgeRatio >= 0 && newAgeRatio <= 1) {\n\t\t\t\t\t\t\tageRatio = newAgeRatio;\n\t\t\t\t\t\t\tage = ageLimitation * ageRatio;\n\t\t\t\t\t\t\tevaluateBornTimeViaAge();\n\t\t\t\t\t\t\tdetectDeath();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn ageRatio;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_ageLimitation],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn ageLimitation;\n\t\t\t\t},\n\t\t\t\tset: function (newAgeLimitation) {\n\t\t\t\t\tnewAgeLimitation = parseFloat(newAgeLimitation);\n\t\t\t\t\tif (newAgeLimitation >= tooSmallAbsoluteValue) {\n\t\t\t\t\t\tageLimitation = newAgeLimitation;\n\t\t\t\t\t}\n\t\t\t\t\tevaluateAgeRatio();\n\t\t\t\t\treturn ageLimitation;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_ageReferenceTimeIsWallClockTime],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn referenceTimeIsWallClockTime;\n\t\t\t\t},\n\t\t\t\tset: function (mustBeTrueToTakeEffects) {\n\t\t\t\t\tif (mustBeTrueToTakeEffects) {\n\t\t\t\t\t\tupdateReferenceTime(NaN);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// if we set \"referenceTimeIsWallClockTime\" to false\n\t\t\t\t\t\t// without providing an explicit reference time,\n\t\t\t\t\t\t// then values such as \"bornTime\" and \"age\"\n\t\t\t\t\t\t// are not possible to evaluate any more.\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_ageReferenceTime],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn referenceTime;\n\t\t\t\t},\n\t\t\t\tset: updateReferenceTime\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_bornTime],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn bornTime;\n\t\t\t\t},\n\t\t\t\tset: bearOn\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_hasBeenBorn],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn hasBeenBorn;\n\t\t\t\t},\n\t\t\t\tset: nilFunction\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_isDead],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn isDead;\n\t\t\t\t},\n\t\t\t\tset: nilFunction\n\t\t\t}\n\t\t);\n\n\t\tObject.defineProperty(propertiesGrantee,\n\t\t\tdecidedNames[pN_isAlive],\n\t\t\t{\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn hasBeenBorn && !isDead;\n\t\t\t\t},\n\t\t\t\tset: nilFunction\n\t\t\t}\n\t\t);\n\n\n\n\n\t\tmethodsGrantee[decidedNames[pN_bearOn]] = bearOn;\n\n\n\n\t\tfunction nilFunction() {}\n\n\t\tfunction evaluateAgeInformationViaBornTimeAndReferenceTime() {\n\t\t\tvar currentTime;\n\t\t\tif (referenceTimeIsWallClockTime) {\n\t\t\t\tcurrentTime = nowInSeconds();\n\t\t\t} else {\n\t\t\t\tcurrentTime = referenceTime;\n\t\t\t}\n\n\t\t\tif (currentTime >= bornTime) {\n\t\t\t\thasBeenBorn = true;\n\t\t\t\tsetAgeTo(currentTime - bornTime);\n\t\t\t} else {\n\t\t\t\thasBeenBorn = false;\n\t\t\t\tisDead = false;\n\t\t\t\tage = NaN;\n\t\t\t\tageRatio = NaN;\n\t\t\t}\n\t\t}\n\n\t\tfunction bearOn(desiredBornTimeInSeconds) {\n\t\t\tdesiredBornTimeInSeconds = parseInt(desiredBornTimeInSeconds);\n\t\t\tif (desiredBornTimeInSeconds > 0) {\n\t\t\t\treferenceTimeIsWallClockTime = false;\n\t\t\t} else {\n\t\t\t\treferenceTimeIsWallClockTime = true;\n\t\t\t\tdesiredBornTimeInSeconds = nowInSeconds();\n\t\t\t}\n\n\t\t\tbornTime = desiredBornTimeInSeconds;\n\t\t\tevaluateAgeInformationViaBornTimeAndReferenceTime();\n\t\t}\n\n\t\tfunction updateReferenceTime(newReferenceTimeInSeconds) {\n\t\t\tnewReferenceTimeInSeconds = parseInt(newReferenceTimeInSeconds);\n\t\t\tif (isNaN(newReferenceTimeInSeconds)) {\n\t\t\t\treferenceTimeIsWallClockTime = true;\n\t\t\t\treferenceTime = NaN;\n\t\t\t\tevaluateAgeInformationViaBornTimeAndReferenceTime();\n\t\t\t} else {\n\t\t\t\tif (newReferenceTimeInSeconds > 0 && newReferenceTimeInSeconds !== referenceTime) {\n\t\t\t\t\treferenceTimeIsWallClockTime = false;\n\t\t\t\t\treferenceTime = newReferenceTimeInSeconds;\n\t\t\t\t\tevaluateAgeInformationViaBornTimeAndReferenceTime();\n\t\t\t\t} else {\n\t\t\t\t\t// The \"referenceTimeIsWallClockTime\" stays unchanged.\n\t\t\t\t\t// referenceTimeIsWallClockTime = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\tfunction setAgeTo(newAge) {\n\t\t\tnewAge = parseFloat(newAge);\n\t\t\tif (newAge >= 0) {\n\t\t\t\tif (newAge > ageLimitation) {\n\t\t\t\t\tage = ageLimitation;\n\t\t\t\t} else {\n\t\t\t\t\tage = newAge;\n\t\t\t\t}\n\t\t\t}\n\t\t\tevaluateAgeRatio();\n\t\t\tevaluateBornTimeViaAge();\n\n\t\t\treturn age;\n\t\t}\n\n\t\tfunction evaluateAgeRatio() {\n\t\t\tif (!isNaN(ageLimitation) && !isNaN(age)) {\n\t\t\t\tageRatio = age / ageLimitation;\n\t\t\t} else {\n\t\t\t\tageRatio = NaN;\n\t\t\t}\n\t\t\tdetectDeath();\n\t\t}\n\n\t\tfunction evaluateBornTimeViaAge() {\n\t\t\tif (isNaN(age)) {\n\t\t\t\tbornTime = NaN;\n\t\t\t} else {\n\t\t\t\tif (referenceTimeIsWallClockTime) {\n\t\t\t\t\tbornTime = nowInSeconds() - age;\n\t\t\t\t} else {\n\t\t\t\t\tbornTime = referenceTime - age;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction detectDeath() {\n\t\t\tif (age >= ageLimitation) {\n\t\t\t\tage = ageLimitation;\n\t\t\t\tageRatio = 1;\n\t\t\t\tisDead = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction wulechuan2DParticle(constructorOptions) {\n\t\tvar propertyName_velocity = 'velocity';\n\t\tvar propertyName_force = 'force';\n\t\tvar propertyName_life = 'age';\n\n\t\tvar thisParticle = this;\n\n\t\tvar mass = 1; // mass\n\t\tvar position = new wulechuan2DVector();\n\n\n\n\t\tinit(constructorOptions);\n\n\t\tvar velocity = thisParticle[propertyName_velocity];\n\t\tvar force = thisParticle[propertyName_force];\n\t\tvar bearOn = thisParticle.bearOn;\n\n\n\t\tconstructorOptions = constructorOptions || {};\n\t\tif (!constructorOptions.doNotBearOnInit) {\n\t\t\tbearOn(constructorOptions.bornTime);\n\t\t}\n\n\n\t\tfunction init(initOptions) {\n\t\t\t// Being public means being writable.\n\t\t\tbuildGettersAndSettersForPublicProperties();\n\n\t\t\twulechuanImpartVelocityTo(thisParticle, null, {\n\t\t\t\tvelocity: propertyName_velocity,\n\t\t\t\t// speed: 'ssppeeeedd',\n\t\t\t\t// turnBy: 'turnDirectionByDegrees'\n\t\t\t});\n\n\t\t\twulechuanImpartForceTo(thisParticle, null, propertyName_force);\n\n\t\t\twulechuanImpartLifeTo(thisParticle, null, {\n\t\t\t\tage: propertyName_life,\n\t\t\t\t// isDead: 'hasDied',\n\t\t\t\tbearOn: 'bearOn'\n\t\t\t});\n\n\t\t\tconfig(initOptions);\n\n\n\t\t\t// thisParticle.config = config;\n\t\t\tthisParticle.move = move;\n\t\t\tthisParticle.moveTo = moveTo;\n\t\t\tthisParticle.setPosition = moveTo;\n\t\t\tthisParticle.onMove = undefined;\n\t\t}\n\n\t\tfunction config(options) {\n\t\t\toptions = options || {};\n\n\t\t\t// Obviously,\n\t\t\t// later processed attribute will overwrite ealier processed ones,\n\t\t\t// if their values are coupled.\n\t\t\tprocessAttribute('mass');\n\t\t\tprocessAttribute('ageRatio');\n\t\t\tprocessAttribute('age');\n\t\t\tprocessAttribute('ageLimitation');\n\t\t\tprocessAttribute('bornTime');\n\t\t\tprocessAttribute('x');\n\t\t\tprocessAttribute('y');\n\t\t\tprocessObjectAttribute('velocity');\n\t\t\tprocessObjectAttribute('force');\n\n\t\t\tfunction processAttribute(attributeName) {\n\t\t\t\tif (options.hasOwnProperty(attributeName)) {\n\t\t\t\t\tthisParticle[attributeName] = options[attributeName];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction processObjectAttribute(attributeName) {\n\t\t\t\tif (options.hasOwnProperty(attributeName)) {\n\t\t\t\t\tthisParticle[attributeName].value = options[attributeName];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction buildGettersAndSettersForPublicProperties() {\n\t\t\tObject.defineProperty(thisParticle, 'mass', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn mass;\n\t\t\t\t},\n\t\t\t\tset: function (newMass) {\n\t\t\t\t\tnewMass = parseFloat(newMass);\n\t\t\t\t\tif (newMass >= 0) mass = newMass;\n\t\t\t\t\t// if (mass < tooSmallAbsoluteValue) {\n\t\t\t\t\t// \tconsole.warn('The mass of Point2D is too low!');\n\t\t\t\t\t// }\n\t\t\t\t\treturn mass;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(thisParticle, 'x', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn position.x;\n\t\t\t\t},\n\t\t\t\tset: function (newPosX) {\n\t\t\t\t\tposition.x = newPosX;\n\t\t\t\t\treturn position.x;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(thisParticle, 'y', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn position.y;\n\t\t\t\t},\n\t\t\t\tset: function (newPosY) {\n\t\t\t\t\tposition.y = newPosY;\n\t\t\t\t\treturn position.y;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.defineProperty(thisParticle, 'position', {\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\treturn position;\n\t\t\t\t},\n\t\t\t\tset: function (newPosition) {\n\t\t\t\t\treturn position.value = newPosition;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\n\n\t\tfunction move(durationInSeconds) {\n\t\t\tif (!thisParticle.isAlive) return;\n\t\t\tif (mass <= tooSmallAbsoluteValue) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdurationInSeconds = parseFloat(durationInSeconds);\n\n\t\t\tif (durationInSeconds <= tooSmallAbsoluteValue) {\n\t\t\t\treturn;\n\t\t\t\t// console.warn('Duration is too small to move a Point2D.');\n\t\t\t}\n\n\t\t\tvelocity.add(force.getNewArrayMultipliedByScalar(1 / mass));\n\t\t\tposition.add(velocity.getNewArrayMultipliedByScalar(durationInSeconds));\n\t\t}\n\n\t\tfunction moveTo() {\n\t\t\tposition.setValue.apply(position, arguments);\n\t\t}\n\t}\n\n\tfunction wulechuanCanvasPointsAndConnections(constructorOptions) {\n\t\tvar thisController = this;\n\n\t\tvar canvas = constructorOptions.canvas;\n\t\tvar canvasContext = canvas.getContext('2d');\n\n\n\t\tvar lineWidthDrawingThreshold = 0.2;\n\t\tvar pointSize = 5;\n\t\tvar thickestLineWidth = 2;\n\t\tvar maxDistanceToMakeConnection = 160;\n\t\tvar pointsCount = 60;\n\t\tvar pointColorRGB = '0,0,0';\n\t\tvar lineColorRGB = '0,0,0';\n\t\tvar pointsAreRounded = true;\n\t\tvar shouldBounceAtBoundary = true;\n\n\t\tvar shouldLeaveTracksOfPoints = false;\n\t\tvar shouldDrawPoints = true;\n\t\tvar shouldDrawLines = true;\n\t\tvar shouldDebugVelocity = false;\n\t\tvar shouldDebugForce = false;\n\t\tvar velocityDebugVisualScale = 0.5;\n\t\tvar forceDebugVisualScale = 10;\n\t\tvar velocityDebugColor = 'rgba(219, 51, 0, 0.79)';\n\t\tvar forceDebugColor = 'yellow';\n\n\t\tvar activeAreaX1 = 0;\n\t\tvar activeAreaY1 = 0;\n\t\tvar activeAreaX2 = 0;\n\t\tvar activeAreaY2 = 0;\n\t\tvar canvasCurrentX = NaN;\n\t\tvar canvasCurrentY = NaN;\n\t\tvar mouseCursorLocalX = NaN;\n\t\tvar mouseCursorLocalY = NaN;\n\t\tvar maxDistanceToMakeConnection2 =\n\t\t\tmaxDistanceToMakeConnection * maxDistanceToMakeConnection;\n\n\t\tvar lastFrameDrawnTime = NaN; // in seconds\n\n\t\tvar allParticles = [];\n\t\tvar theDrawPointMethod;\n\n\n\t\tthisController.initOneParticle = _initOneParticleDefaultMethod;\n\t\tthisController.updateOneParticleOnIteration = _updateOneParticleOnIterationDefaultMethod;\n\t\tthisController.drawFrame = drawFrame;\n\t\tthisController.updateCanvasPositionAndSize = updateCanvasPositionAndSize;\n\t\tthisController.setActiveArea = setActiveArea;\n\n\n\t\tinit(constructorOptions);\n\n\n\n\n\t\tvar hasBeenInitialized = false;\n\n\t\tfunction init(initOptions) {\n\t\t\tconfig(initOptions);\n\t\t\tsetupMouseEvents();\n\t\t\tupdateCanvasPositionAndSize();\n\t\t\t_generateAllPoints();\n\n\t\t\thasBeenInitialized = true;\n\t\t}\n\n\t\tfunction config(options) {\n\t\t\toptions = options || {};\n\n\t\t\tif (typeof options.pointsAreRounded === 'boolean') pointsAreRounded = options.pointsAreRounded;\n\t\t\tif (typeof options.shouldBoundAtBoundary === 'boolean') shouldBounceAtBoundary = options.shouldBoundAtBoundary;\n\n\t\t\tif (options.pointSize) pointSize = options.pointSize;\n\t\t\tif (options.thickestLineWidth) thickestLineWidth = options.thickestLineWidth;\n\t\t\tif (options.maxDistanceToMakeConnection) maxDistanceToMakeConnection = options.maxDistanceToMakeConnection;\n\t\t\tif (options.pointsCount) pointsCount = options.pointsCount;\n\t\t\tif (options.pointColorRGB) pointColorRGB = options.pointColorRGB;\n\t\t\tif (options.lineColorRGB) lineColorRGB = options.lineColorRGB;\n\t\t\tif (options.lineWidthDrawingThreshold) lineWidthDrawingThreshold = options.lineWidthDrawingThreshold;\n\n\t\t\tmaxDistanceToMakeConnection2 = maxDistanceToMakeConnection * maxDistanceToMakeConnection;\n\n\t\t\ttheDrawPointMethod = pointsAreRounded ? _drawPointAsRoundedDot : _drawPointAsSqure;\n\n\t\t\tif (options.hasOwnProperty('updateOneParticleOnIteration')) {\n\t\t\t\tif (typeof options.updateOneParticleOnIteration === 'function') {\n\t\t\t\t\tthisController.updateOneParticleOnIteration = options.updateOneParticleOnIteration;\n\t\t\t\t} else {\n\t\t\t\t\tthisController.updateOneParticleOnIteration = _updateOneParticleOnIterationDefaultMethod;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar oldinitOneParticleMethod = thisController.initOneParticle;\n\t\t\tif (options.hasOwnProperty('initOneParticle')) {\n\t\t\t\tif (typeof options.initOneParticle === 'function') {\n\t\t\t\t\tthisController.initOneParticle = options.initOneParticle;\n\t\t\t\t} else {\n\t\t\t\t\tthisController.initOneParticle = _initOneParticleDefaultMethod;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasBeenInitialized && oldinitOneParticleMethod !== thisController.initOneParticle) {\n\t\t\t\t_generateAllPoints();\n\t\t\t}\n\t\t}\n\n\t\tfunction setupMouseEvents() {\n\t\t\twindow.addEventListener('mousemove', function (event) {\n\t\t\t\tmouseCursorLocalX = event.clientX - canvasCurrentX;\n\t\t\t\tmouseCursorLocalY = event.clientY - canvasCurrentY;\n\t\t\t});\n\n\t\t\twindow.addEventListener('mouseout', function () {\n\t\t\t\tmouseCursorLocalX = NaN;\n\t\t\t\tmouseCursorLocalY = NaN;\n\t\t\t});\n\t\t}\n\n\t\tfunction updateCanvasPositionAndSize(toUpdateActiveArea) {\n\t\t\tcanvas.width = canvas.clientWidth;\n\t\t\tcanvas.height = canvas.clientHeight;\n\n\t\t\tvar newBoundingBox = canvas.getBoundingClientRect();\n\t\t\tcanvasCurrentX = newBoundingBox.left;\n\t\t\tcanvasCurrentY = newBoundingBox.top;\n\n\t\t\tif (typeof toUpdateActiveArea === 'function') {\n\t\t\t\ttoUpdateActiveArea(canvas);\n\t\t\t} else {\n\t\t\t\tsetActiveArea(0, 0, canvas.width, canvas.height);\n\t\t\t}\n\t\t}\n\n\t\tfunction setActiveArea(x1, y1, x2, y2) {\n\t\t\tactiveAreaX1 = Math.min(x1, x2);\n\t\t\tactiveAreaX2 = Math.max(x1, x2);\n\t\t\tactiveAreaY1 = Math.min(y1, y2);\n\t\t\tactiveAreaY2 = Math.max(y1, y2);\n\t\t}\n\n\t\tfunction drawFrame(localTimeInSeconds) {\n\t\t\tvar iterationDuration = localTimeInSeconds - lastFrameDrawnTime;\n\n\t\t\tif (!shouldLeaveTracksOfPoints) {\n\t\t\t\tcanvasContext.clearRect(0, 0, canvas.width, canvas.height);\n\t\t\t}\n\n\t\t\tallParticles.forEach(function (particle, particleIndex) {\n\t\t\t\tvar position = particle.position;\n\t\t\t\tvar px = position.x;\n\t\t\t\tvar py = position.y;\n\t\t\t\tvar comparingParticle;\n\n\n\t\t\t\tthisController.updateOneParticleOnIteration(particle, iterationDuration);\n\n\t\t\t\tif (shouldDrawLines) {\n\t\t\t\t\tvar i = particleIndex + 1;\n\t\t\t\t\tfor ( ; i < allParticles.length; i++) {\n\t\t\t\t\t\tcomparingParticle = allParticles[i];\n\n\t\t\t\t\t\tdrawLine(\n\t\t\t\t\t\t\tpx, py, comparingParticle.x, comparingParticle.y,\n\t\t\t\t\t\t\tevaluateDistanceRatio(particle.position, comparingParticle.position)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (!isNaN(mouseCursorLocalX)) {\n\t\t\t\t\t\t\tdrawLine(\n\t\t\t\t\t\t\t\tpx, py, mouseCursorLocalX, mouseCursorLocalY,\n\t\t\t\t\t\t\t\tevaluateDistanceRatio(\n\t\t\t\t\t\t\t\t\tparticle.position,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tx: mouseCursorLocalX, \n\t\t\t\t\t\t\t\t\t\ty: mouseCursorLocalY\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t\tif (shouldDrawPoints) {\n\t\t\t\t\ttheDrawPointMethod(px, py);\n\t\t\t\t}\n\n\t\t\t\tif (shouldDebugVelocity) {\n\t\t\t\t\tdrawVelocity(particle);\n\t\t\t\t}\n\n\t\t\t\tif (shouldDebugForce) {\n\t\t\t\t\tdrawForce(particle);\n\t\t\t\t}\n\n\t\t\t\tvar velocity = particle.velocity;\n\t\t\t\tvar vx = velocity.x;\n\t\t\t\tvar vy = velocity.y;\n\n\n\t\t\t\tif (shouldBounceAtBoundary) {\n\t\t\t\t\tif (px > activeAreaX2) {\n\t\t\t\t\t\tvelocity.x = abs(vx) * -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (py > activeAreaY2) {\n\t\t\t\t\t\tvelocity.y = abs(vy) * -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (px < activeAreaX1) {\n\t\t\t\t\t\tvelocity.x = abs(vx);\n\t\t\t\t\t}\n\t\t\t\t\tif (py < activeAreaY1) {\n\t\t\t\t\t\tvelocity.y = abs(vy);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\n\t\t\tif (!isNaN(mouseCursorLocalX) && shouldDrawPoints && !shouldLeaveTracksOfPoints) {\n\t\t\t\ttheDrawPointMethod(mouseCursorLocalX, mouseCursorLocalY);\n\t\t\t}\n\n\t\t\tlastFrameDrawnTime = localTimeInSeconds;\n\t\t}\n\n\t\tfunction _drawPointAsRoundedDot(px, py) {\n\t\t\tcanvasContext.fillStyle = 'rgba(' + pointColorRGB + ',' + 1 + ')';\n\t\t\tcanvasContext.beginPath();\n\t\t\tcanvasContext.arc(\n\t\t\t\tpx, py, // center position\n\t\t\t\tpointSize/2, // radius\n\t\t\t\t0, Pi_2 // angle to travel\n\t\t\t);\n\t\t\tcanvasContext.fill();\n\t\t}\n\n\t\tfunction _drawPointAsSqure(px, py) {\n\t\t\tcanvasContext.fillRect(\n\t\t\t\tpx - pointSize/2,     py - pointSize/2,\n\t\t\t\tpointSize,            pointSize\n\t\t\t);\n\t\t}\n\n\t\tfunction drawLine(p1x, p1y, p2x, p2y, distanceRatio, lineColor) {\n\t\t\tvar lineWidthRatio = 1 - distanceRatio;\n\t\t\tvar lineWidth = thickestLineWidth * lineWidthRatio;\n\t\t\tif (lineWidth < lineWidthDrawingThreshold) return;\n\n\t\t\tif (!lineColor) {\n\t\t\t\tlineColor =  'rgba(' + lineColorRGB + ',' + Math.min(1, lineWidthRatio * 0.3 + 0.3) + ')';\n\t\t\t}\n\n\n\t\t\tcanvasContext.lineWidth = lineWidth;\n\t\t\tcanvasContext.strokeStyle = lineColor;\n\n\t\t\tcanvasContext.beginPath();\n\t\t\tcanvasContext.moveTo(p1x, p1y);\n\t\t\tcanvasContext.lineTo(p2x, p2y);\n\t\t\tcanvasContext.stroke();\n\t\t}\n\n\t\tfunction drawVelocity(particle) {\n\t\t\tif (particle.speed * velocityDebugVisualScale < 2) return;\n\n\t\t\tvar x = particle.position.x;\n\t\t\tvar y = particle.position.y;\n\t\t\tvar vx = particle.velocity.x;\n\t\t\tvar vy = particle.velocity.y;\n\n\t\t\tdrawLine(\n\t\t\t\tx, y,\n\t\t\t\tx+vx*velocityDebugVisualScale, y+vy*velocityDebugVisualScale,\n\t\t\t\t0,\n\t\t\t\tvelocityDebugColor\n\t\t\t);\n\t\t}\n\n\t\tfunction drawForce(particle) {\n\t\t\tif (particle.forceStrength * forceDebugVisualScale < 2) return;\n\n\t\t\tvar x = particle.position.x;\n\t\t\tvar y = particle.position.y;\n\t\t\tvar fx = particle.force.x;\n\t\t\tvar fy = particle.force.y;\n\n\t\t\tdrawLine(\n\t\t\t\tx, y,\n\t\t\t\tx+fx*forceDebugVisualScale, y+fy*forceDebugVisualScale,\n\t\t\t\t0,\n\t\t\t\tforceDebugColor\n\t\t\t);\n\t\t}\n\n\t\tfunction _generateAllPoints() {\n\t\t\tallParticles.length = 0;\n\n\t\t\tfor (var i = 0; i < pointsCount; i++) {\n\t\t\t\tvar particle = new wulechuan2DParticle({\n\t\t\t\t\t// doNotBearOnInit: true\n\t\t\t\t});\n\n\t\t\t\tthisController.initOneParticle(\n\t\t\t\t\tparticle, pointsCount, activeAreaX1, activeAreaY1, activeAreaX2, activeAreaY2\n\t\t\t\t);\n\n\t\t\t\tallParticles.push(particle);\n\t\t\t}\n\t\t}\n\n\t\tfunction _initOneParticleDefaultMethod(particle) {\n\t\t\tparticle.position = [\n\t\t\t\trandomBetween(activeAreaX1, activeAreaX2),\n\t\t\t\trandomBetween(activeAreaY1, activeAreaY2)\n\t\t\t];\n\t\t\t// particle.speed = randomBetween(speedMin, speedMax);\n\t\t\t// particle.velocityDirection = randomBetween(0, Pi_2);\n\t\t}\n\n\t\tfunction _updateOneParticleOnIterationDefaultMethod(particle, iterationDuration) {\n\t\t\tvar forceStrength = 0.1;\n\t\t\tparticle.force.add([\n\t\t\t\trandomBetween(-forceStrength, forceStrength),\n\t\t\t\trandomBetween(-forceStrength, forceStrength),\n\t\t\t]);\n\t\t\tparticle.move(iterationDuration);\n\t\t}\n\n\t\tfunction evaluateDistanceRatio(position1, position2) {\n\t\t\tvar distance2 = position1.getDistance2To(position2);\n\t\t\tvar distance2Ratio = distance2 / maxDistanceToMakeConnection2;\n\t\t\t\n\t\t\treturn Math.min(1, distance2Ratio);\n\t\t}\n\t}\n})();"]}